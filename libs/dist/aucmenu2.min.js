/*! @license
The MIT License (MIT)

Copyright (c) 2018+, Mario Vernari - Cet Electronics.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
 **/
!function(e,t){if("function"==typeof define&&define.amd)define(["jquery"],function(e){return e.fn||(e.fn={}),t(e)});else if("object"==typeof module&&module.exports){var n="undefined"!=typeof window?window.jQuery:void 0;n||(n=require("jquery")).fn||(n.fn={}),module.exports=t(n)}else e.AuJS=e.AuJS||{},e.AuJS.Drawer=t(e.jQuery)}("undefined"!=typeof self?self:this,function(e){"use strict";const t=Object.freeze({LEFT:"left",RIGHT:"right"}),n=Object.freeze({CLOSED:"closed",OPENING:"opening",OPENED:"opened",CLOSING:"closing"}),i=Object.freeze({drawerSize:300,transitionDuration:300}),r=10,o=function(){const t={};var i=!1;Object.defineProperty(t,"created",{get:function(){return i}});var r,o,s=!1;Object.defineProperty(t,"visible",{get:function(){return s}}),Object.defineProperty(t,"container",{get:function(){return r}}),t.create=function(){i||(0===(r=e("body > div.aujs-drawer-bay")).length&&(r=e("<div>",{class:"aujs-drawer-bay"}).appendTo(e("body"))),0===(o=r.children(".aujs-drawer-overlay")).length&&(o=e("<div>",{class:"aujs-drawer-overlay"}).css("display","none").appendTo(r)),i=!0)};const a=[];return t.notify=function(e,t){const i="boolean"==typeof t?t:e.isAutoClose&&e.state!==n.CLOSED,r=a.indexOf(e);i?r<0&&a.push(e):r>=0&&a.splice(r,1);const c=a.length>0;c!==s&&(s=c,o.css("display",s?"":"none"))},t.destroy=function(){r&&r.remove(),r=o=null,i=!1},t}();return{Sides:t,States:n,Overlay:o,Controller:function(){const s=function(){l.forEach(function(e){e.updateRenderer()})},a=function(t){e(t.target).closest(".aujs-drawer-overlay").length&&l.forEach(function(e){e.isAutoClose&&e.close()})},c={};var u=!1;Object.defineProperty(c,"rendered",{get:function(){return u}});const l=[];return c.add=function(s,a){if(u)throw new Error("Invalid operation.");if(Object.values(t).indexOf(s)<0)throw new Error('Invalid argument "side".');o.create();const c=function(s,a,c){const u=Object.freeze(e.extend({},c));var l={},d=!0,f=n.CLOSED;function p(t){f!==t&&(f=t,o.notify(O),e.isFunction(u.onStateChanged)&&u.onStateChanged(f))}function h(){switch(s){case t.LEFT:return-O.getActualOption("drawerSize");case t.RIGHT:return O.getActualOption("drawerSize")}}function g(t){if(e.isFunction(l.indent)){var n="";t&&!l.isAutoClose&&(n=O.getActualOption("drawerSize")),l.indent(t,n)}}function m(e){l.customDrawer&&(e=n.OPENED);const t=y[0].style;switch(t.width=O.getActualOption("drawerSize")+"px",e){case n.OPENING:case n.OPENED:t.visibility=l.isAutoClose?"hidden":"",t.transitionDuration="0ms",t.transitionProperty="transform",t.transform="translate3d(0,0,0)",g(!0);break;case n.CLOSING:case n.CLOSED:t.visibility="hidden",t.transitionDuration="0ms",t.transitionProperty="transform",t.transform="translate3d("+h()+"px,0,0)",g(!1)}}const O={getActualOption:function(e){return l[e]>0?l[e]:i[e]}};Object.defineProperty(O,"side",{get:function(){return s}});var y,w=!1;return Object.defineProperty(O,"rendered",{get:function(){return w}}),Object.defineProperty(O,"rendererName",{get:function(){return l&&l.name}}),Object.defineProperty(O,"isAutoClose",{get:function(){return!!l.isAutoClose}}),Object.defineProperty(O,"state",{get:function(){return f}}),Object.defineProperty(O,"element",{get:function(){return y}}),O.create=function(){w||(y=e("<div>",{class:"aujs-drawer "+s}).css({visibility:"hidden"}).appendTo(a),w=!0,O.invalidateContent())},O.open=function(e){if(!0===e&&l.customDrawer)p(n.OPENED);else{if(f!==n.CLOSED)return;if(l.renderer)if(p(n.OPENING),l.customDrawer)m(f),l.renderer.open(function(){p(n.OPENED)});else{const e=y[0].style;e.visibility="",setTimeout(function(){e.transitionDuration=O.getActualOption("transitionDuration")+"ms",e.transitionProperty="transform",e.transform="translate3d(0,0,0)",setTimeout(function(){l.isAutoClose||g(!0),p(n.OPENED)},O.getActualOption("transitionDuration"))},r)}}},O.close=function(e){if(!0===e&&l.customDrawer)p(n.CLOSED);else{if(f!==n.OPENED)return;if(l.renderer)if(p(n.CLOSING),l.customDrawer)l.renderer.close(function(){p(n.CLOSED)});else{const e=y[0].style;e.transitionDuration=O.getActualOption("transitionDuration")+"ms",e.transitionProperty="transform",e.transform="translate3d("+h()+"px,0,0)",l.isAutoClose||g(!1),setTimeout(function(){e.visibility="hidden",p(n.CLOSED)},O.getActualOption("transitionDuration"))}else p(n.CLOSED)}},O.toggle=function(){f===n.CLOSED?O.open():f===n.OPENED&&O.close()},O.invalidateContent=function(){d=!0,O.updateRenderer()},O.updateRenderer=function(){var t,n=!1;const i=e(window).width(),r=i<=600&&u.render_sm||i<=960&&u.render_md||u.render_lg;if(r&&r.renderer){if(l!==r||d){const e=l.isAutoClose;l.renderer&&(l.renderer.detach(O),l.persistent||l.renderer.destroy(),l={}),(l=r).persistent||l.renderer.create(),l.renderer.attach(O),m(f),l.customDrawer&&l.renderer.preset(f),n=!0,e&&!l.isAutoClose&&(t=!1)}}else l.renderer&&(l.renderer.detach(O),l.persistent||l.renderer.destroy(),n=!0,l.isAutoClose&&(t=!1)),l={};d=!1,n&&o.notify(O,t)},O.destroy=function(){w&&(o.notify(O,!1),y.remove()),y=null,w=!1},O}(s,o.container,a);return l.push(c),c},c.remove=function(e){if(u)throw new Error("Invalid operation.");if(!e)return;const t=l.indexOf(e);t>=0&&l.splice(t,1)},c.create=function(){u||(l.forEach(function(e){e.create()}),e(o.container).on("click",a),e(window).on("resize",s),u=!0)},c.destroy=function(){e(window).off("resize",s),e(o.container).off("click",a),l.forEach(function(e){e.destroy()}),u=!1},c}}}),function(e,t){if("function"==typeof define&&define.amd)define(["jquery"],function(e){return e.fn||(e.fn={}),t(e)});else if("object"==typeof module&&module.exports){var n="undefined"!=typeof window?window.jQuery:void 0;n||(n=require("jquery")).fn||(n.fn={}),module.exports=t(n)}else e.AuJS=e.AuJS||{},e.AuJS.MenuStruct=t(e.jQuery)}("undefined"!=typeof self?self:this,function(e){"use strict";const t=(n=0,function(){return"aujs_id_"+n++});var n;return function(n){function i(n,s,a){if(e.isPlainObject(n)){const e=r&&r(n)||t();var c=o.nodeMap[e];return c||(c=o.nodeMap[e]=new function(e,t,n){const i=this;Object.defineProperty(this,"id",{value:t,writable:!1}),Object.defineProperty(this,"label",{value:n,writable:!1}),Object.defineProperty(this,"isSeparator",{value:"-"===n,writable:!1}),Object.defineProperty(this,"expandable",{get:function(){return 0!==i.children.length}}),this.parentId=null,this.level=0,this.icon=null,this.children=[],this.getFirstChild=function(){if(!i.children.length)return;const t=i.children[0],n=Array.isArray(t)?t[0]:t;return e.nodeMap[n]}}(o,e,n.label)),c.parentId=s,c.level=a,c.isSeparator||(c.icon=n.icon,c.children=Array.isArray(n.items)?i(n.items,e,a+1):[]),[e]}if(Array.isArray(n)){var u=[];return n.forEach(function(e){u.push(i(e,s,a))}),u}throw new Error("Source type not supported.")}e.isPlainObject(n)||(n={});const r=e.isFunction(n.keySelector)?n.keySelector:function(e){return e.id},o={roots:[],nodeMap:{}},s={_getContext:function(){return o},getNode:function(t){if(e.isFunction(t))for(var n in o.nodeMap){const e=o.nodeMap[n];if(t(e))return e}else if("string"==typeof t)return o.nodeMap[t]},getNodes:function(){return o.nodeMap.values()}};var a={};return s.getData=function(){return a},s.setData=function(e){a=e||{},o.roots=i(a,null,0)},s}}),function(e,t){if("function"==typeof define&&define.amd)define(["jquery"],function(e){return e.fn||(e.fn={}),t(e)});else if("object"==typeof module&&module.exports){var n="undefined"!=typeof window?window.jQuery:void 0;n||(n=require("jquery")).fn||(n.fn={}),module.exports=t(n)}else e.AuJS=e.AuJS||{},e.AuJS.MenuSelectorSingle=t(e.jQuery)}("undefined"!=typeof self?self:this,function(e){"use strict";return function(){const t=[],n={};var i;return n.addListener=function(e){!e||t.indexOf(e)>=0||t.push(e)},n.removeListener=function(e){if(!e)return;const n=t.indexOf(e);n>=0&&t.splice(n,1)},Object.defineProperty(n,"selection",{get:function(){return i},set:function(n){i!==n&&(i=n,t.forEach(function(t){e.isFunction(t)?t(i):e.isFunction(t.onselect)&&t.onselect(i)}))}}),n}}),function(e,t){if("function"==typeof define&&define.amd)define(["jquery","AuJS"],function(e,n){return e.fn||(e.fn={}),t(e,n)});else if("object"==typeof module&&module.exports){var n="undefined"!=typeof window?window.jQuery:void 0;n||(n=require("jquery")).fn||(n.fn={});var i="undefined"!=typeof window&&void 0!==window.AuJS?window.AuJS:require("AuJS");module.exports=t(n,i)}else e.AuJS=e.AuJS||{},e.AuJS.TreeMenuRenderer=t(e.jQuery,e.AuJS)}("undefined"!=typeof self?self:this,function(e,t){"use strict";const n=Object.freeze({itemHeight:48,indentWidth:32,expanderWidth:32,iconWidth:24,expSymbol:"fas fa-chevron-right",transitionDuration:300,onSelection:null});return function(i,r){const o=10,s=i._getContext(),a=e.extend({},n,e.isPlainObject(r)?r:{});const c=function(e){for(var t=0;t<e.length;t++)if(s.nodeMap[e[t]].expandable)return!0;return!1},u=function(e){for(var t in h)h[t].select(t===e)},l={};var d;l.getActualOption=function(e){return a[e]},Object.defineProperty(l,"selector",{get:function(){return d},set:function(e){d!==e&&(d&&d.removeListener(u),(d=e)&&d.addListener(u))}});var f,p=!1;Object.defineProperty(l,"rendered",{get:function(){return p}}),l.create=e.noop,l.attach=function(e){f||(f=e,l.render())},l.detach=function(e){f&&(f.element.children().detach(),f=null),p=!1};var h={};return l.render=function(){if(p)return;var n=f.element.children(".aujs-treemenu");0===n.length&&(n=e("<div>",{class:"aujs-treemenu"}).appendTo(f.element));const i={allocateExpanders:c(s.roots)};s.roots.forEach(function(r){const u=s.nodeMap[r];(h[r]=new function n(i,r){const u=this;var d=t.Drawer.States.CLOSED;Object.defineProperty(this,"node",{value:r,writable:!1});var f=!1;Object.defineProperty(this,"selected",{get:function(){return f}}),Object.defineProperty(this,"expanded",{get:function(){return d===t.Drawer.States.OPENED||d===t.Drawer.States.OPENING}});var p=!1;Object.defineProperty(this,"rendered",{get:function(){return p}}),this.element=null,this.itemCtr=null,this.outlineBay=null,this.outline=null,this.render=function(g,m,O){if(u.element=e("<div>",{class:"aujs-treemenu-node level"+r.level,"data-id":r.id}).appendTo(g),r.isSeparator)u.element.addClass("aujs-treemenu-separator");else{f&&u.element.addClass("selected");const o=e("<div>",{class:"aujs-treemenu-node-header"}).css({height:i.getActualOption("itemHeight")}).appendTo(u.element),p=e("<div>",{class:"aujs-exp"}).css({"min-width":i.getActualOption("expanderWidth")}).appendTo(o),g=e("<a>",{href:"#"}).appendTo(o).on("click",function(e){e.stopPropagation(),e.preventDefault();const t={renderer:u,node:r,idToSelect:r.id};return a.onSelection&&a.onSelection(t)||l.selector&&(l.selector.selection=t.idToSelect),!1});O.allocateExpanders||g.css("margin-left",4);const w=e("<div>",{class:"aujs-treemenu-node-caption"}).appendTo(g);if(e("<span>",{class:"aujs-label"}).appendTo(w).text(r.label),r.icon){const t=e("<div>",{class:"aujs-icon"}).css({"min-width":i.getActualOption("iconWidth")}).appendTo(w);e("<i>",{class:r.icon}).appendTo(t)}if(u.outlineBay=e("<div>",{class:"aujs-treemenu-node-outline-bay"}).appendTo(u.element),m){const t=i.getActualOption("expanderWidth")/2;u.outline=e("<div>",{class:"aujs-treemenu-node-outline"}).css({left:t,width:i.getActualOption("indentWidth")-t,top:8-i.getActualOption("itemHeight")/2}).appendTo(m)}u.itemsCtr=e("<div>",{class:"aujs-treemenu-node-items"}).css({"margin-left":i.getActualOption("indentWidth")}).appendTo(u.element);var y=null;if(r.expandable){y=function(){u.cmdexp()};const o=e("<a>",{href:"#"}).appendTo(p).on("click",function(e){return e.stopPropagation(),e.preventDefault(),y(),!1}),a=e("<i>",{class:i.getActualOption("expSymbol")}).appendTo(o)[0].style,l=u.itemsCtr[0].style;u.expanded?(d=t.Drawer.States.OPENED,a.transition="",a.transform="rotate(90deg)"):(d=t.Drawer.States.CLOSED,l.transition="",l.opacity=0,l.height=0);const f={allocateExpanders:c(r.children)};r.children.forEach(function(e){const t=s.nodeMap[e];(h[e]=new n(i,t)).render(u.itemsCtr,u.outlineBay,f)})}}p=!0,setTimeout(u.updateChildrenOutlines,o)},this.updateSiblingOutlines=function(){var e=h[r.parentId];e&&(e.updateSiblingOutlines(),e.updateChildrenOutlines())},this.updateChildrenOutlines=function(){if(p){var e=i.getActualOption("itemHeight");r.children.forEach(function(t){const n=h[t];n.outline&&n.outline.css("height",e-4),e+=n.element[0].getBoundingClientRect().height}),u.outlineBay&&u.outlineBay.css("opacity",u.expanded?1:0)}},this.showOutlineBay=function(e){if(!p)return;const t="boolean"==typeof e?e:u.expanded;u.outlineBay&&u.outlineBay.css("opacity",t?1:0);var n=h[r.parentId];n&&n.showOutlineBay(e)},this.expand=function(){if(p){if(d===t.Drawer.States.CLOSED&&r.expandable){d=t.Drawer.States.OPENING,u.showOutlineBay(!1);const e=u.element.children(".aujs-treemenu-node-header").find(".aujs-exp > a").children()[0].style;e.transitionDuration=i.getActualOption("transitionDuration")+"ms",e.transitionProperty="transform",e.transform="rotate(90deg)";const n=u.itemsCtr[0].style;n.transition="",n.opacity=0,n.height=0,setTimeout(function(){n.transitionDuration=i.getActualOption("transitionDuration")+"ms",n.transitionProperty="opacity, height",n.opacity=1,n.height=u.getChildrenHeight()+"px",setTimeout(function(){d=t.Drawer.States.OPENED,n.height="auto",u.updateSiblingOutlines(),u.showOutlineBay()},i.getActualOption("transitionDuration"))},o)}}else d=t.Drawer.States.OPENED},this.collapse=function(){if(p){if(d===t.Drawer.States.OPENED&&r.expandable){d=t.Drawer.States.CLOSING,u.showOutlineBay(!1);const e=u.element.children(".aujs-treemenu-node-header").find(".aujs-exp > a").children()[0].style;e.transitionDuration=i.getActualOption("transitionDuration")+"ms",e.transitionProperty="transform",e.transform="rotate(0deg)";const n=u.itemsCtr[0].style;n.transition="",n.opacity=1,n.height=u.getChildrenHeight()+"px",setTimeout(function(){n.transitionDuration=i.getActualOption("transitionDuration")+"ms",n.transitionProperty="opacity, height",n.opacity=0,n.height=0,setTimeout(function(){d=t.Drawer.States.CLOSED,u.updateSiblingOutlines(),u.showOutlineBay()},i.getActualOption("transitionDuration"))},o)}}else d=t.Drawer.States.CLOSED},this.cmdexp=function(){d===t.Drawer.States.CLOSED?u.expand():d===t.Drawer.States.OPENED&&u.collapse()},this.expandParents=function(){u.expand();var e=h[r.parentId];e&&e.expandParents()},this.select=function(e){f!==(e=!!e)&&(f=e,p&&(f?u.element.addClass("selected"):u.element.removeClass("selected"))),f&&(u.expandParents(),u.bringIntoView())},this.bringIntoView=function(){p&&setTimeout(function(){var e=u.element.closest(".aujs-treemenu")[0],t=e.getBoundingClientRect(),n=u.element[0].getBoundingClientRect();n.top<t.top?e.scrollTop=e.scrollTop-1.2*(t.top-n.top):n.top+n.height>t.top+t.height&&(e.scrollTop=e.scrollTop+1.2*(n.top+n.height-t.top-t.height))},1.2*i.getActualOption("transitionDuration"))},this.getChildrenHeight=function(){var t=0;return u.itemsCtr.children().each(function(){t+=e(this)[0].getBoundingClientRect().height}),t}}(l,u)).render(n,null,i)});const r=l.selector&&l.selector.selection;if(r){const e=h[r];e&&e.select(!0)}p=!0},l.destroy=function(){p=!1,h={}},l}}),function(e,t){if("function"==typeof define&&define.amd)define(["jquery","AuJS"],function(e,n){return e.fn||(e.fn={}),t(e,n)});else if("object"==typeof module&&module.exports){var n="undefined"!=typeof window?window.jQuery:void 0;n||(n=require("jquery")).fn||(n.fn={});var i="undefined"!=typeof window&&void 0!==window.AuJS?window.AuJS:require("AuJS");module.exports=t(n,i)}else e.AuJS=e.AuJS||{},e.AuJS.BladeMenuRenderer=t(e.jQuery,e.AuJS)}("undefined"!=typeof self?self:this,function(e,t){"use strict";const n=Object.freeze({drawerSize:300,itemHeight:48,expanderWidth:48,iconWidth:24,backSymbol:"fas fa-arrow-circle-left fa-lg",expSymbol:"fas fa-chevron-right",hiliteSymbol:"fas fa-chevron-circle-right fa-lg",transitionDuration:300,closeOnSelect:!0,expandWhenSelect:!0,backWhenSelect:!0,rootBackLabel:"Close menu"});return function(i,r){const o=i._getContext(),s=e.extend({},n,e.isPlainObject(r)?r:{});var a=0;function c(t,n){const i=this,r="aujs-blademenu-node blade";this.rendered=!1,this.element=null,this.itemCtr=null,this.bid=a++,this.render=function(a){i.element=e("<div>",{class:r+" close"}).appendTo(a);const l=e("<div>",{class:"aujs-header"}).css({"min-height":t.getActualOption("itemHeight")}).appendTo(i.element),d=e("<div>",{class:"back"}).css({"min-width":t.getActualOption("expanderWidth")}).appendTo(l),p=e("<a>",{href:"#"}).appendTo(d).on("click",function(e){return e.stopPropagation(),e.preventDefault(),f.back(),!1}),h=(e("<i>",{class:t.getActualOption("backSymbol")}).appendTo(p),e("<a>").appendTo(l));h.attr("href","#").on("click",function(e){return e.stopPropagation(),e.preventDefault(),!n.id||s.backWhenSelect?f.back():(f.selector&&(f.selector.selection=n.id),t.getActualOption("closeOnSelect")&&f.close()),!1});const g=e("<div>",{class:"aujs-caption"}).appendTo(h);if(e("<span>",{class:"aujs-label"}).appendTo(g).text(n.label),n.icon){const i=e("<div>",{class:"aujs-icon"}).css({"min-width":t.getActualOption("iconWidth")}).appendTo(g);e("<i>",{class:n.icon}).appendTo(i)}i.itemsCtr=e("<div>",{class:"aujs-items"}).appendTo(i.element),n.children.forEach(function(n){const r=o.nodeMap[n];(w[n]=new function(t,n,i){const r=this,o=function(){if(r.rendered&&(a?r.element.removeClass("hilited").addClass("selected"):l?r.element.removeClass("selected").addClass("hilited"):r.element.removeClass("selected hilited"),r.xbtnContent0)){const e=l&&!a;r.xbtnContent0.css("display",e?"none":""),r.xbtnContent1.css("display",e?"":"none")}};Object.defineProperty(this,"blade",{value:n,writable:!1}),Object.defineProperty(this,"node",{value:i,writable:!1});var a=!1;Object.defineProperty(this,"selected",{get:function(){return a}});var l=!1;Object.defineProperty(this,"hilited",{get:function(){return l}}),this.rendered=!1,this.element=null,this.render=function(n,l){if(r.element=e("<div>",{class:"aujs-blademenu-node item","data-id":i.id}).appendTo(n),i.isSeparator)r.element.addClass("aujs-blademenu-separator");else{a&&r.element.addClass("selected");const n=e("<div>",{class:"aujs-header"}).css({height:t.getActualOption("itemHeight")}).appendTo(r.element),o=e("<div>",{class:"aujs-exp"}).css({"min-width":t.getActualOption("expanderWidth")}).appendTo(n),p=e("<a>",{href:"#"}).appendTo(n).on("click",function(e){return e.stopPropagation(),e.preventDefault(),d&&s.expandWhenSelect?d():(f.selector&&(f.selector.selection=i.id),t.getActualOption("closeOnSelect")&&f.close()),!1}),h=e("<div>",{class:"aujs-caption"}).appendTo(p);if(e("<span>",{class:"aujs-label"}).appendTo(h).text(i.label),i.icon){const n=e("<div>",{class:"aujs-icon"}).css({"min-width":t.getActualOption("iconWidth")}).appendTo(h);e("<i>",{class:i.icon}).appendTo(n)}var d=null;if(i.children.length){const n=new c(t,i);m.push(n),n.render(l),d=function(){O.unshift(n),u()};const s=e("<a>",{href:"#"}).appendTo(o).on("click",function(e){return e.stopPropagation(),e.preventDefault(),d(),!1});r.xbtnContent0=e("<i>",{class:t.getActualOption("expSymbol")}).css("display","none").appendTo(s),r.xbtnContent1=e("<i>",{class:t.getActualOption("hiliteSymbol")}).css("display","none").appendTo(s)}}r.rendered=!0,o()},this.select=function(e){a!==(e=!!e)&&(a=e,o())},this.hilite=function(e){l!==(e=!!e)&&(l=e,o())},this.bringIntoView=function(){r.rendered&&setTimeout(function(){var e=r.element.parent()[0],t=e.getBoundingClientRect(),n=r.element[0].getBoundingClientRect();n.top<t.top?e.scrollTop=e.scrollTop-1.2*(t.top-n.top):n.top+n.height>t.top+t.height&&(e.scrollTop=e.scrollTop+1.2*(n.top+n.height-t.top-t.height))},1.2*t.getActualOption("transitionDuration"))}}(t,i,r)).render(i.itemsCtr,a)}),i.rendered=!0};var l=-1;this.indent=function(e){if(l!==e){l=e;const t=i.element[0];t.className=l>=0?r+" open indent"+l:r+" close"}}}const u=function(){for(var e in m.forEach(function(e){e.indent(O.indexOf(e))}),w){const t=w[e];t.hilite(y.indexOf(t)>=0)}},l=function(){if(O.length=0,y.length=0,f.isOpen){var e;const n=f.selector&&f.selector.selection;if(n&&(e=w[n]),e)for(var t=e;t;)y.push(t),O.push(t.blade),t=w[t.node.parentId];else m.length&&O.push(m[0])}u(),y.forEach(function(e){e.bringIntoView()})},d=function(e){for(var t in w)w[t].select(t===e);l()},f={};var p;f.getActualOption=function(e){return s[e]},Object.defineProperty(f,"selector",{get:function(){return p},set:function(e){p!==e&&(p&&p.removeListener(d),(p=e)&&p.addListener(d))}});var h,g=!1;Object.defineProperty(f,"rendered",{get:function(){return g}}),Object.defineProperty(f,"isOpen",{get:function(){return v===t.Drawer.States.OPENED||v===t.Drawer.States.OPENING}}),f.create=function(){},f.attach=function(e){h||(h=e,f.render())},f.detach=function(e){h&&(h.element.children().detach(),h=null),v=t.Drawer.States.CLOSED,g=!1};const m=[],O=[],y=[];var w={};f.render=function(){if(g)return;var t=h.element.children(".aujs-blademenu");0===t.length&&(t=e("<div>",{class:"aujs-blademenu"}).appendTo(h.element));var n=t.children("div");0===n.length&&(n=e("<div>").appendTo(t));const i=h.getActualOption?h.getActualOption("drawerSize"):f.getActualOption("drawerSize");n.css({width:i,transform:"translate3d(-"+1.1*i+"px, 0, 0)"});const r={id:"",level:0,label:s.rootBackLabel,icon:"",children:o.roots},a=new c(f,r);m.length=0,m.push(a),a.render(n);const u=f.selector&&f.selector.selection;if(u){const e=w[u];e&&e.select(!0)}g=!0,setTimeout(l,10)};var v=t.Drawer.States.CLOSED;return f.open=function(n){v===t.Drawer.States.CLOSED&&(v=t.Drawer.States.OPENING,this.rendered?l():f.render(),setTimeout(function(){v=t.Drawer.States.OPENED,e.isFunction(n)&&n()},f.getActualOption("transitionDuration")))},f.close=function(n){v===t.Drawer.States.OPENED&&(v=t.Drawer.States.CLOSING,h.close&&h.close(!0),O.length=0,y.length=0,u(),setTimeout(function(){v=t.Drawer.States.CLOSED,e.isFunction(n)&&n()},f.getActualOption("transitionDuration")))},f.preset=function(e){if(v!==e)switch(v=e){case t.Drawer.States.OPENING:case t.Drawer.States.OPENED:this.rendered?l():f.render(),v=t.Drawer.States.OPENED;break;case t.Drawer.States.CLOSING:case t.Drawer.States.CLOSED:O.length=0,y.length=0,u(),v=t.Drawer.States.CLOSED}},f.back=function(){v===t.Drawer.States.OPENED&&(O.length>1?(O.splice(0,1),u()):f.close())},f.destroy=function(){v=t.Drawer.States.CLOSED,g=!1,O.length=0,y.length=0,m.length=0,w={}},f}});
//# sourceMappingURL=aucmenu2.min.js.map